
\section{利用导数研究函数的性质}
\label{sec:research-function-use-derivative}

\subsection{函数为常数的条件}
\label{sec:condition-for-constant-function}

关于可导函数为常数函数的条件，有如下定理

\begin{theorem}
  某区间上的可导函数的函数值恒保持为某个常数的充分必要条件是，它的导函数为零函数.
\end{theorem}

\begin{proof}[证明]
  先证充分性，如果函数的导函数为常数函数，那么对于定义域上的任何两个不同的实数$x_1,x_2$，存在介于它俩之间的另一实数$\xi$，使得
  \[ \frac{f(x_1)-f(x_2)}{x_1-x_2} = f'(\xi) = 0 \]
  于是$f(x_1)=f(x_2)$，由$x_1,x_2$的任意性，知函数为常数函数，另外，常数函数的导函数为零函数，定理得证。
\end{proof}

进一步有如下结论
\begin{inference}
  如果某区间上的两个可导函数的导函数恒相等，则这两个函数仅相差一个常数。
\end{inference}
这只要考察两个函数的差函数就清楚了。

\subsection{单调性与极值}
\label{sec:research-monotonicity-and-minmax-value}

导数可以用来研究函数的单调性和极值，我们先建立如下关于单调性的定理
\begin{theorem}
  如果函数$f(x)$的一阶导函数$f'(x)$在某个区间上恒满足$f'(x) \geqslant 0$，那么函数在此区间上单调不减，如果不等式反向，即$f'(x) \leqslant 0$恒成立，那么函数在此区间上单调不增。如果不等式中的等号总不成立或者至多仅在有限个点处成立，那么函数相应的是严格单调的。
\end{theorem}

\begin{proof}[证明]
  如果函数在某区间上恒成立$f'(x) \geqslant 0$，那么对于区间上任意两个不同的数$x_1$与$x_2$，设$x_1<x_2$，按照拉格朗日中值定理，存在$\xi \in (x_1,x_2)$，使得
  \[ f'(\xi) = \frac{f(x_1)-f(x_2)}{x_1-x_2} \]
  由$f'(\xi) \geqslant 0$即得$f(x_1) \leqslant f(x_2)$，于是函数单调不减。函数单调不增的证明也是完全类似的。

  显然，如果上面的证明中不等式$f'(x) \geqslant 0$中的等号永远不成立，即永远只能取大于号，那么相应的得出的结论是$f(x_1)<f(x_2)$，即是严格递增的。

  现在来证明，如果导函数$f'(x) \geqslant 0$恒成立，但等号仅在有限个点处取得，那么函数仍然是严格增加的。

  首先可以肯定函数是单调不减的了，把区间划分成多个小区间，使得每个小区间上至多只有一个导函数零点，如果函数在每个小区间上是严格增加的，而连续性又保证了端点处的接续，那么就能得出函数在整个区间上都是严格增加的，所以只需要证明导函数只在一个点处取零点的情形就可以了。

  假定导函数$f'(x)$仅在区间$[a,b]$内的某一点$c$处取零值，采用反证明法来证明函数是严格增加的，若不然，假如存在$x_1,x_2 \in [a,b]$使得$x_1<x_2$且$f(x_1)=f(x_2)$，那么$f'(x_1)$与$f'(x_2)$中至多只有一个为零，而另一个必为正值，不妨设就是$f'(x_1)>0$，于是存在$x_1$的某个右邻域$(x_1,x_1+\delta)$，在此右邻域上恒有$f(x)>f(x_1)=f(x_2)$，只要把$\delta$限制的充分小，就能保证$x_1+\delta<x_2$，于是函数在$(x_1,x_1+\delta)$上的函数值就都大于$f(x_2)$，这与函数的单调不减是矛盾的，从而得证。
\end{proof}

\begin{example}
  关于定理中导函数恒非负，仅在有限个点处取零值也能保证函数的严格增加这一点，函数$y=x^3$提供了一个例子，它的导函数$y'=3x^2 \geqslant 0$，但仅在$x=0$处取零值，并不影响原来函数是严格增加的这一事实。
\end{example}

\begin{example}
需要说明的是，对于函数单调不减与单调不增来讲，条件$f'(x) \geqslant 0$或者$f'(x) \leqslant 0$是充分必要条件（在函数可导的前提下），但对于严格单调来说，不等式成立且至多仅在有限个点处取等号，则只是充分条件而非必要条件，我们会举一个反例加以说明。

在正方形区域$[-1,1]\times[-1,1]$中，用$x=y=\pm \frac{1}{n}(n=1,2,\ldots)$划分网格，并在每一个小正方形区域$[\frac{1}{n+1},\frac{1}{n}] \times [\frac{1}{n+1},\frac{1}{n}]$内，将左下角的角点$\left(\frac{1}{n+1},\frac{1}{n+1}\right)$与右上角的角点$\left(\frac{1}{n},\frac{1}{n}\right)$用一段正弦曲线连接起来，这段正弦曲线是将$y=\sin{x}$在$\left[ -\frac{\pi}{2}, \frac{\pi}{2} \right]$中的部分进行平移和沿坐标轴方向的拉伸变换得来，使得正好被小正方形区域框住，这样一段一段的正弦曲线相接，构成一个全新的函数，在每一个区间$[\frac{1}{n+1},\frac{1}{n}]$上，函数的表达式是:
\[ f(x) = \frac{1}{2} \left( \frac{1}{n+1} + \frac{1}{n} \right) + \frac{1}{2n(n+1)} \sin{\pi n(n+1) \left[ x - \frac{1}{2} \left( \frac{1}{n+1} + \frac{1}{n} \right) \right]} \]
在$x=0$处令$f(0)=0$，然后将曲线中心对称到第三象限，得到另一半图象，从而得出完整的函数图象，显然这个函数是严格增加的，但导函数在每一个$x = \pm \frac{1}{n}$处都取零值，我们再证明$f'(0)=1$就可以了。

设
\[ x = \frac{1}{2} \left( \frac{1}{n+1} + \frac{1}{n} \right) +t, \  |t| \leqslant \frac{1}{2}\left( \frac{1}{n} - \frac{1}{n+1} \right) = \frac{1}{2n(n+1)} \]
于是
\begin{align*}
  \frac{f(x)-f(0)}{x-0} & = \frac{f(x)}{x} \\
                        & = \frac{\frac{1}{2} \left( \frac{1}{n+1} + \frac{1}{n} \right)+\frac{1}{2n(n+1)}\sin{\pi n(n+1)t}}{\frac{1}{2} \left( \frac{1}{n+1} + \frac{1}{n} \right)+t} \\
  & = \frac{2n+1+\sin{\pi n(n+1)t}}{2n+1+2n(n+1)t}
\end{align*}
注意到$|2n(n+1)t| \leqslant 1$，得出
\[ \lim_{x \to 0} \frac{f(x)}{x} = 1 \]
即$f'(0)=1$ .

这个例子表明，即便导函数有无穷多个零点，函数也是有可能严格单调的，那么这个条件到底放宽到何种程度，方能得出充分必要条件呢，这个问题在实变函数的测度理论中方能给出答案。
\end{example}


关于极值，费马极值定理已经表明，极值点处如果可导，则导数只能是零，但是如何判断导函数的零点是否是原来函数的极值点呢，有如下定理
\begin{theorem}
  设函数$f(x)$在$x_0$的邻域内可导，如果它满足以下两条，那么函数在$x_0$处取极值.
  \begin{enumerate}
  \item $f'(x_0)=0$.
  \item 存在$x_0$的某个足够小的邻域，使得函数在两侧空心邻域内各自保持恒定的符号，且两侧的符号正好相反，具体的说，如果左正右负，则函数在$x_0$处取极大值，反之，若左负右正，则函数在$x_0$处取极小值。
  \end{enumerate}
\end{theorem}

\begin{proof}[证明]
 只证明极大值的情况，如果函数$f(x)$满足$f'(x_0)=0$，且在它的某个邻域的左侧$(x_0-\delta,x_0)$上有$f'(x)>0$，而在右侧$(x_0,x_0+\delta)$上有$f'(x)<0$，我们来证明$f(x_0)$是一个极大值，因为在左侧导函数恒正，函数严格增加，同理函数在右侧严格减少，所以$f(x_0)$是一个极大值。极小值也同理可证。
\end{proof}

\begin{example}
  注意这个定理中的条件是充分条件，但不是必要条件(假定函数总是可导的)。实际上，极值的邻域内都并不一定有确定的单调性，可以仿照前面的例子构造相应的反例，此处从略。
\end{example}

\begin{example}[光的折射定律]
  假定光在甲、乙两种介质中的传播速度分别是$v_1$和$v_2$，如图所示，图中直线是两种介质的分界面，现在光从介质甲中的$A$点发出，经分界面折射后，经过介质乙中的$B$点，光在同一种介质中是必定沿直线传播的，我们知道，光总是沿着用时最短的路径前进，那么问题就来了，光线应该在分界面上何处折射，才能使得传播用时最短？

  设$A$、$B$两点与分界面的距离分别记为$a$、$b$，并且沿分界面的距离是$l$，假定光线到达分界面上的点$P$处，点$P$沿分界面与$A$、$B$的距离分别是$x$和$l-x$，那么光线传播所用的时间是
  \[ f(x) = \frac{\sqrt{x^2+a^2}}{v_1}+\frac{\sqrt{(l-x)^2+b^2}}{v_2} \]
  为了求得最小值，求导并令其为零，得
  \[ f'(x) = \frac{x}{v_1\sqrt{x^2+a^2}} - \frac{l-x}{v_2 \sqrt{(l-x)^2+b^2}} \]
  根据物理意义，这最小值一定存在，设当$x=x_0$时用时最短，则必有$f'(x_0)=0$，于是有
  \[ \frac{x_0}{v_1\sqrt{x_0^2+a^2}} = \frac{l-x_0}{v_2 \sqrt{(l-x_0)^2+b^2}}\]
  通常用入射角(入射光线与法线的夹角)和折射角（折射光线与法线的夹角）来标记点$P$的位置，而不是用$x_0$，设入射角为$\alpha$，折射角为$\beta$，上式即为
  \[ \frac{\sin{\alpha}}{v_1} = \frac{\sin{\beta}}{v_2} \]
  光线在介质中的传播速度与在真空中的传播速度之比，就是该介质的\emph{折射率}，设这两种介质的折射率分别为$n_1$和$n_2$，上式就成为
  \[ \frac{\sin{\alpha}}{n_1} = \frac{\sin{\beta}}{n_2} \]
  或者写成
  \[ \frac{\sin{\alpha}}{\sin{\beta}} = \frac{n_1}{n_2} \]
  上式就是光线传播最短路径所应满足的条件，其被称为\emph{光的折射定律}。
\end{example}

\subsection{证明不等式}
\label{sec:proof-inequality-use-derivative}

\subsection{函数的凸性与拐点}
\label{sec:convert-of-function}

函数的凸性是关于函数图象的拱形特征的刻画，如果函数的图象在区间上向上拱起，则它图象上任意两点间的部分，都位于这两点连线段的上方，从而引出如下定义
\begin{definition}
  如果定义在区间$(a,b)$上的函数$f(x)$对区间上的任意两个数$x_1,x_2$以及任意满足$\alpha+\beta=1(\alpha \geqslant 0,\beta \geqslant 0)$的一对实数$\alpha$、$\beta$都成立
  \[ f(\alpha x_1+\beta x_2) \geqslant \alpha f(x_1) + \beta f(x_2) \]
  则称函数在这区间上是\emph{上凸函数}，如果式中的等号总是取不到，则称为\emph{严格上凸函数}，把不等式反向，则得到\emph{下凸函数}和\emph{严格下凸函数}的定义。
\end{definition}

显然，把函数乘以一个正常数，不改变凸性，若乘以一个负常数，则凸性与原来相反，若干个具有相同凸性的函数相加，结果仍具备相同的凸性。

\begin{example}
  二次函数$y=x^2$在$\mathbb{R}$上是下凸函数，因为
  \[ (\alpha x_1 + \beta x_2)^2 - (\alpha x_1^2 + \beta x_2^2) = -\alpha \beta (x_1-x_2)^2 \leqslant 0 \]
  并且等号仅在$x_1=x_2$时成立，所以它不但是下凸，还是严格下凸，一般的二次函数通过平移，都可以化为$y=ax^2$的形式，而平移不改变凸性，但相应的区间也会相应的平移，所以结论就是，如果二次函数的二次系数为正，则为下凸，否则为上凸。
\end{example}

把定义中居于中间的$\alpha x_1 + \beta x_2$看成第三个变量，就得下来这个定理
\begin{theorem}
  \label{convert-function-tangent-of-secant-line}
  函数$f(x)$在某区间上为上凸函数的充分必要条件是，对于区间上任意三个实数$x_1<x_2<x_3$，都成立
  \[ \frac{f(x_1)-f(x_2)}{x_1-x_2} \geqslant \frac{f(x_2)-f(x_3)}{x_2-x_3} \]
\end{theorem}
这只要注意到中间的$x_2$可以用$x_1$与$x_3$的加权平均表达出来就明白了:
\[ x_2 = \frac{x_2-x_3}{x_1-x_3} x_1 + \frac{x_1-x_2}{x_1-x_3} x_3 \]
于是只需要取
\[ \alpha = \frac{x_2-x_3}{x_1-x_3}, \  \beta = \frac{x_1-x_2}{x_1-x_3} \]
再代回到定义中的不等式，便得知定理成立。

对于连续函数而言，上面的定义与下面这个定义等价
\begin{definition}
  如果区间上的连续函数$f(x)$对区间上的任意$x_1,x_2$都成立
  \[ f \left( \frac{x_1+x_2}{2} \right) \geqslant \frac{f(x_1)+f(x_2)}{2} \]
  则称它是区间上的\emph{上凸函数}，类似的可得到严格上凸、下凸、严格下凸的定义。
\end{definition}

即对于连续函数来说，只需要前面定义中$\alpha=\beta=\frac{1}{2}$就够了，这一点在我关于初等数学的笔记中已经证明过，这里从略。

由定义立即可以得到著名的 \emph{琴生不等式}.
\begin{theorem}
  对于某区间上的上凸函数而言，在区间上任意取定$n$个实数$x_i(i=1,2,\ldots,n)$，有
  \[ f \left( \frac{1}{n} \sum_{i=1}^n x_i \right) \geqslant \frac{1}{n} \sum_{i=1}^n f(x_i) \]
\end{theorem}

这定理的证明同样见于我的初等数学笔记，仍然从略。

\begin{example}
  琴生不等式是一系列重要不等式的来源，例如，在后面我们将证明，对数函数$y=\ln{x}$在$(0,+\infty)$上是上凸的，于是套用琴生不等式，对任意$n$个正实数$x_i(i=1,2,\ldots,n)$，就有
  \[ \ln{\left( \frac{1}{n} \sum_{i=1}^n x_i \right)} \geqslant \frac{1}{n} \sum_{i=1}^n \ln{x_i} \]
  即
  \[ \frac{1}{n} \sum_{i=1}^n x_i \geqslant \sqrt[n]{\prod_{i=1}^n x_i} \]
  这就是著名的\emph{均值不等式}.
\end{example}

利用数学归纳法，可以得到
\begin{theorem}
  如果函数$f(x)$在某区间上上凸，那么对于该区间上任意$n$个实数$x_i(i=1,2,\ldots,n)$以及满足
  \[ \sum_{i=1}^n \alpha_i=1(\alpha_i \geqslant 0,i=1,2,\ldots,n) \]
  的一组权值$\alpha_i(i=1,2,\ldots,n)$，成立不等式
  \[ f \left( \sum_{i=1}^n \alpha_i x_i \right) \geqslant \sum_{i=1}^n \alpha_i f(x_i) \]
\end{theorem}

现在我们利用导数工具来研究函数的凸性，自然的，仅限于可导函数的凸性。

\begin{theorem}
  如果函数的导函数在某区间上是单调不增的，那么函数在该区间上是上凸的。
\end{theorem}
由拉格朗日定理结合前面的\autoref{convert-function-tangent-of-secant-line}就清楚了，当然，这只是充分条件，不是必要条件。

自然的也有如下结论
\begin{inference}
  如果函数在某区间上二阶可导，且$f''(x) \leqslant 0$，那么函数在该区间上是上凸的，如果不等式反向，则是下凸的。
\end{inference}

\begin{example}
  由此可以知道，指数函数在$\mathbb{R}$上是下凸的，而对数函数在$(0,+\infty)$上是上凸的。正弦函数在$(0,\pi)$上是上凸的，而在$(-\pi,0)$上是下凸的，余弦函数在$(-\frac{\pi}{2},\frac{\pi}{2})$上是上凸的，而在$(\frac{\pi}{2}，\frac{3\pi}{2})$上是下凸的。
\end{example}

\begin{example}[幂函数的凸性与幂平均值不等式]
  对于幂函数$y=x^p$，二阶导函数$y''=p(p-1)x^{p-2}$，如果$p>1$，则它在$(0,+\infty)$上是下凸函数，否则是上凸函数。我们对一般的幂函数应用琴生不等式，即对任意$n$个正实数$x_i(i=1,2,\ldots,n)$，如果$p>1$，则有
  \begin{equation}
    \label{eq:power-mean-value-inequality-1}
   \left( \frac{1}{n} \sum_{i=1}^n x_i \right)^p \leqslant \frac{1}{n}\sum_{i=1}^n x_i^p 
  \end{equation}
  如果$p<1$，不等式反向。

  现在设实数$p>q>0$，那么由上述不等式有
  \[ \left( \frac{1}{n} \sum_{i=1}^n t_i \right)^{\frac{p}{q}} \leqslant \frac{1}{n}\sum_{i=1}^n t_i^{\frac{p}{q}} \]
  再令$t_i=x_i^q$，即得
  \begin{equation}
    \label{eq:power-mean-value-inequality-2}
   \left( \frac{1}{n} \sum_{i=1}^n x_i^q \right)^{\frac{1}{q}} \leqslant  \left( \frac{1}{n} \sum_{i=1}^n x_i^p \right)^{\frac{1}{p}}
 \end{equation}
 这表明，函数
 \[ f(\alpha) = \left( \frac{1}{n} \sum_{i=1}^n x_i^{\alpha} \right)^{\frac{1}{\alpha}} \]
 关于指数$\alpha$严格增加。

 不等式\autoref{eq:power-mean-value-inequality-1}以及\autoref{eq:power-mean-value-inequality-2}称为\emph{幂平均值不等式}.
\end{example}


\subsection{方程的近似解}
\label{sec:approx-solve-of-equation}





%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../calculus-note"
%%% End:
