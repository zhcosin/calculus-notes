
\section{函数的连续性}
\label{sec:continuousness-of-function}

在初等数学中，我们接触到了很多函数，例如幂函数$y=x^n(n \in \mathbb{Z})$，三角函数与反三角函数、指数函数与对数函数。它们的图象都是一段连续的曲线，或者是由若干段连续的曲线所构成，在这一节，我们将对“连续”这个概念作一个精确的定义，并进而讨论连续函数的性质。

\subsection{连续与单侧连续}
\label{sec:continuousness-and-single-continuousness}

\begin{definition}
  如果函数$f(x)$在$x_0$处存在极限，且极限值正好是该点处的函数值$f(x_0)$，则称函数在$x_0$处 \emph{连续}，即
  \[ \lim_{x \to x_0} f(x) = f(x_0) \]
\end{definition}

如果是该点处的左极限等于该点处函数值，则称函数在该点处 \emph{左连续}，类似的有 \emph{右连续}的概念。

连续用极限的精确语言描述就是，对于无论多么小的正实数$\varepsilon$，恒存在另一正实数$\delta$，使得对区间$(x_0-\delta, x_0+\delta)$上的一切实数成立着$|f(x)-f(x_0)|<\varepsilon$成立。

如果函数在某点处不连续，则称该点是函数的一个 \emph{间断点}。

\begin{definition}
  如果函数在某个区间上处处连续，则称函数在这区间上连续，或者说它是这区间上的连续函数。
\end{definition}

\begin{example}
  在 \autoref{example:limit-of-sin-cos-function}中，我们证明了
  \[ \lim_{x \to x_0} \sin{x} = \sin{x_0}, \  \lim_{x \to x_0} \cos{x} = \cos{x_0} \]
  因此正弦函数和余弦函数都是$\mathbb{R}$上的连续函数.
\end{example}

\begin{example}
  从 \autoref{example:single-limits-of-gausse-function}的讨论得知，对于高斯函数，设$x_0 \in \mathbb{Z}$，有
    \[ \lim_{x \to x_0^+} [x] = x_0, \  \lim_{x \to x_0^-} [x] = x_0-1 \]
    因为$[x_0]=x_0$，所以高斯函数在每个整数处右连续，但不左连续，所以每个整点都是间断点，易知除整点外的其余点处都连续。
\end{example}

\begin{example}
  在 \autoref{example:limit-of-sin-1-over-x-at-0}中，我们知道了下面的极限
  \[ \lim_{x \to 0} x\sin{\frac{1}{x}} = 0 \]
  但由于函数在$x=0$处没有定义，故而不连续，但我们可以补充定义它在该点处的函数值，即
  \[ f(x) =
    \begin{cases}
      x \sin{\frac{1}{x}} & x \neq 0 \\
      0 & x=0
    \end{cases}
  \]
  那么$f(x)$就在$x=0$处连续了。
\end{example}


\begin{example}
  我们举一个定义在$\mathbb{R}$上但处处不连续的函数的例子，狄利克雷(Dirichlet，德国数学家)函数$D(x)$，这是一个指示一个实数是有理数还是无理数的标志函数，它定义在全体实数上，当$x$是有理数时，$D(x)=1$，当$x$是无理数时，$D(x)=0$，即
  \[
    D(x) =
    \begin{cases}
      1 & x \in \mathbb{Q} \\
      0 & x \in \mathbb{R}-\mathbb{Q}
    \end{cases}
  \]
  现在来证明它在$R$上处处不连续，即在任意$x_0 \in R$处都不连续，这是因为，当$x$取有理数并趋于$x_0$时，函数值趋于1，但当$x$取无理数趋于$x_0$时，函数值趋于零，因而函数在$x_0$处没有极限，从而也不连续。
\end{example}

\begin{example}
  \label{example:function-with-continuous-at-single-point}
  在狄利克雷函数的基础上，我们可以构造出一个定义在$\mathbb{R}$上，但仅在一个点处连续的函数，定义函数$f(x)=xD(x)$，我们来证明，它仅在$x=0$处连续。

  先证明它在$x=0$处连续，因为当$x \to 0$时，$x \to 0$为无穷小，而$D(x)$是有界量，无穷小与有界量的乘积仍是无穷小，所以$\lim\limits_{x \to 0} f(x)=0=f(0)$，所以函数在$x=0$处连续。

  再证明它在任意$x_0 \neq 0$处都不连续，与狄利克雷函数相仿，当$x$取有理数值并趋于$x_0$时，函数值将趋于$x_0$，但当$x$取无理数值并趋于$x_0$时，函数值则趋于$0$，但$x_0 \neq 0$，所以函数在$x_0$处不存在极限，更不连续。
\end{example}

\begin{example}
  \label{example:continuous-of-riemann-function}
  黎曼(Riemann，德国数学家)函数$R(x)$是一个有趣的例子，它定义在区间$[0,1]$上，在任意无理数处都连续，但在任意有理数处不连续，它的定义如下，
  \[ R(x) =
    \begin{cases}
      \frac{1}{q} & x=\frac{p}{q} \in [0,1], p,q \in \mathbb{Z}, q >0, (p,q)=1 \\
      0 & x \in [0,1]-\mathbb{Q}
    \end{cases}
  \]
  简单来说，当$x$是有理数$\dfrac{p}{q}$时，$R(x)=\dfrac{1}{q}$，注意这里$p$、$q$是一对既约整数（即最大公因数为1），且$q$是正的。而当$x$是无理数时，$R(x)=0$.

  黎曼函数可以看成是狄利克雷函数的一个改进，我们现在来证明，黎曼函数在所有无理数处连续。

  任取无理数$x_0$，只需要证明$\lim\limits_{x \to x_0} R(x)=0$就可以了，对于任意小的正实数$\varepsilon>0$，我们要找一个$\delta>0$，使得$\forall x \in (x_0-\delta,x_0+\delta)$都有$|R(x)|<\varepsilon$成立，显然无理数是无关紧要的，这个$\delta$只需要由有理数来决定，当$x$是有理数$\dfrac{p}{q}(q>0)$时，我们就是要使
  \[ \frac{1}{q} < \varepsilon \]
  成立，这就需要让区间$(x_0-\delta,x_0+\delta)$上的一切有理数$\dfrac{p}{q}$都满足$q > \dfrac{1}{\varepsilon}$，这能否做到呢？是可以的，因为不满足这个条件的有理数是有限的（小于$\dfrac{1}{\varepsilon}$的正整数$q$是有限的，而小于这些$q$的非负整数$p$也是有限的），从而把这些有理数记为$x_1,x_2,\ldots,x_m$(注意这里的$m$跟$\varepsilon$有关)，则只要让$\delta$同时满足$\delta < |x_i-x_0|(i=1,2,\ldots,m)$，则这些有理数都不会落在区间$(x_0-\delta,x_0+\delta)$上，从而对于该区间上的一切有理数，前面所需要的条件就成立了，于是函数在$x_0$处连续，即在任意无理数处连续。

  但对于$x_0$为有理数的情形，只要让$x$取无理数并趋于$x_0$，则函数值将趋于0而非$R(x_0)$，所以$R(x)$在$x_0$处不存在极限，也就不连续。
\end{example}

\subsection{间断点及其分类}
\label{sec:discontinuity-point-and-its-category}

如果函数在某点处不连续但是存在极限，只是这极限与函数值不相等或者该点根本就没有定义函数值，那么称这点是 \emph{可去间断点}，可以通过改变或者定义该点的函数值为该点的极限值的方式来将函数进行 \emph{连续开拓}。如果函数在某点处分别存在左极限和右极限，但是两个极限不相等，则称该点是函数的 \emph{跳跃间断点}，跳跃间断点和可去间断点统称 \emph{第一类间断点}，第一类间断点的特征是函数在该点存在两个方向的单侧极限。除第一类间断点之外的其它间断点统称 \emph{第二类间断点}，显然，第二类间断点处至少有一个单侧极限不存在。

\subsection{连续函数的性质}
\label{sec:properties-of-continuous-function}


由连续的定义可见，函数在某点处连续，等价于它在该点处存在极限并且正好等于该点处的函数值，因此把函数极限的性质照搬过程，便得函数在某点处连续时所具有的性质:
\begin{theorem}[局部有界性]
  若函数在某点处连续，则必在该点的某邻域上有界。
\end{theorem}

\begin{theorem}[局部保号性]
  若函数在$x_0$处连续，则对于任意小于$f(x_0)$的实数$r$，存在$x_0$的某邻域$(x_0-\delta,x_0+\delta)$，使得函数在该邻域内恒有$f(x)>r$，类似的，对于任意大于$f(x_0)$的实数$r$，也存在$x_0$的某邻域$(x_0-\delta,x_0+\delta)$，使得函数在该区间上恒有$f(x)<r$.
\end{theorem}

\begin{inference}
  如果函数在某点处连续，且该点处函数值为正，则存在该点的某邻域内，函数在这邻域内恒为正号，同理，如果该点函数值为负，则函数必在该点的某邻域内恒保持负号。
\end{inference}

\begin{theorem}
  如果函数$f(x)$和$g(x)$都在$x_0$处连续，则它们的和、差、积、商所作成的函数在该点也连续，在商的情形，要求$g(x_0) \neq 0$。
\end{theorem}

\begin{example}
  \label{example:continous-of-power-function}
  在\autoref{example:continous-of-a-power-integer-with-a-greater-1} 中已经证明了指数函数$f(x)=a^x(a>1)$在$\mathbb{R}$上连续，这里来证明$0<a<1$的情况下，指数函数同样是$\mathbb{R}$上的连续函数，这是因为，在$0<a<1$时，有
  \[ a^x = \frac{1}{\left( \frac{1}{a} \right)^x} \]
  显然，分子分母均是$\mathbb{R}$上的连续函数，从这一节的结果就证明了结论。
\end{example}

\subsection{复合函数的连续性}
\label{sec:continuousness-of-composite-function}

由复合函数极限存在的条件，可得
\begin{theorem}[复合函数的连续性]
  \label{theorem:the-continuity-of-combine-function}
  设函数$g(x)$在$x_0$处连续，记$u_0=g(x_0)$，若另一函数$f(u)$在$u_0$处连续，则复合函数$f(g(x))$在$x_0$处连续。
\end{theorem}

到现在，我们知道把某点处连续的函数进行四则混合运算，以及进行复合运算，所得到的新函数仍然在该点连续，由此我们可以迅速知道大批的连续函数。

\subsection{有限覆盖定理}
\label{sec:finite-covering-theorem}

为了下一小节作准备，我们来证明一个非常深刻的关于实数连续性的定理，这个结果属于魏尔斯特拉斯。

\begin{theorem}[魏尔斯特拉斯有限覆盖定理]
  如果无穷多个开区间的并集覆盖了某个闭区间，则存在其中的有限个开区间，它们的并集就能够覆盖前述闭区间。
\end{theorem}

\begin{proof}[证明]
  设开区间系$U_i(i=1,2,\ldots)$的并集覆盖了闭区间$[a,b]$，我们定义一个集合$A$，如果实数$x(a \leqslant x \leqslant b)$使得$[a,x]$有有限覆盖，则$x \in A$，显然$A$为有界集，因此有上确界，我们证明这个上确界必然是$b$，设此上确界是$r$，如果$r<b$，则闭区间$[a,r]$有有限覆盖，即能够选出有限个开区间覆盖它，把这些开区间再并上覆盖实数$r$的任一个开区间$(r-\delta_1,r+\delta_2)$，就构成一个$[a,r+\frac{\delta_2}{2}]$的一个有限覆盖，这表明$r+\frac{\delta_2}{2}\in A$，这与$r$是$A$的上确界矛盾，所以$r=b$，这就证明了定理.
\end{proof}

\subsection{闭区间上的连续函数}
\label{sec:continuous-function-in-closed-interval}

\begin{theorem}
  \label{theorem:function-bound-when-continuous-at-closed-interval}
  闭区间上的连续函数在此区间上必定有界.
\end{theorem}

\begin{proof}[证明]
  因为函数在闭区间上连续，所以对于此区间上任一点，函数都能在它的某个邻域上有界，显然这些邻域覆盖了整个闭区间，根据有限覆盖定理，能在其中选出有限个开区间，它们的并就能覆盖住这个闭区间，而函数在这有限个开区间中每一个上都是有界的，因此只要取最大的上界和最小的下界，便是它在这闭区间上的界。
\end{proof}

\begin{theorem}
  闭区间上的连续函数存在最大值和最小值。
\end{theorem}

\begin{proof}[证明]
  根据\autoref{theorem:function-bound-when-continuous-at-closed-interval}，函数在闭区间上连续则有界，从而便有上下确界，只要证明这两个确界能够取到就行了，只证明上确界可以取到，下确界也是同理的。设函数$f(x)$在这闭区间上的上确界为$M$，则存在收敛到$M$的函数值序列$f(x_1),f(x_2),\cdots$，而自变量序列$x_1,x_2,\cdots$是有界的，所以它存在收敛的子列，仍以$x_1,x_2,\cdots$来表示它，设这子列的极限为$x_M$，显然$x_M$仍然在这闭区间上，而且$\lim\limits_{n \to \infty}f(x_n)=M$，则由连续性得有$f(x_M)=f(\lim\limits_{n \to \infty} x_n) = \lim\limits_{n \to \infty} f(x_n) = M$.
\end{proof}

\begin{theorem}[介值定理]
  闭区间上的连续函数，其函数值能够遍历最大值与最小值之间的任意值。
\end{theorem}

\begin{proof}[证明]
  根据前面的结果，这最大最小值都能够取到， 不妨设$f(a_1)=m$为最小值，$f(b_1)=M$为最大值，并且假设$a_1 \leqslant b_1$(反过来也是类似的)，实数$m < \mu < M$，取闭区间$[a_1,b_1]$的中点$\frac{a_1+b_1}{2}$，如果$f(\frac{a_1+b_1}{2})=\mu$则结论就成立了，否则如果$\frac{a_1+b_1}{2} < \mu$就取后一半子区间$[\frac{a_1+b_1}{2}, b_1]$作为$[a_2,b_2]$，如果$f(\frac{a_1+b_1}{2})>\mu$则取前一半子区间$[a_1,\frac{a_1+b_1}{2}]$作为$[a_2,b_2]$，如此反复下去，最后的结果就是，或者能够在某个闭区间$[a_n,b_n]$的中点处刚好有$f(\frac{a_n+b_n}{2})=\mu$，或者能够得到一个闭区间序列$[a_1,b_1],[a_2,b_2],\ldots,[a_n,b_n],\ldots$使得每一个闭区间都是前一个闭区间的一半并且两个端点的函数值分别大于和小于$\mu$，在后一种情形，显然这闭区间序列确定出一个数$x_0$，使得$x_0$同时位于这所有的闭区间上，那么必然有$f(x_0)=\mu$，用反证法，如果$f(x_0)>\mu$，则因为函数在$x$处连续，存在$x_0$的某个邻域$(x_0-\delta,x_0+\delta)$，使得在此区间上恒有$f(x)>\mu$，但这与前述闭区间序列显然矛盾，因为那闭区间序列充分靠后的闭区间必然落在此处的邻域内部，自然不可能在两个端点处的函数值分别大于和小于$\mu$，同理可以证明$f(x_0)$也不可能小于$\mu$，所以$f(x_0)=\mu$.
\end{proof}

\begin{inference}[零点定理]
  若闭区间上连续函数在两个端点处函数值异号，则它在这区间上必存在至少一个零点。
\end{inference}

\subsection{反函数的连续性}
\label{sec:continuousness-of-reverse-function}

关于反函数的连续性，有如下结论:
\begin{theorem}
  如果函数$f(x)$在闭区间$[a,b]$上严格单调并连续，则其函数$x=\varphi(y)$在其定义域$[f(a),f(b)]$或者$[f(b),f(a)]$上也连续。
\end{theorem}

\begin{proof}[证明]
  假定原函数$f(x)$是严格增加的，只要证明反函数$x=\varphi(y)$在任意一点$y_0 \in [f(a),f(b)]$处连续就行，只证明$y_0$属于开区间的情形，端点处的情形也是类似的，设$y_0=f(x_0) \in (f(a),f(b))$，需要证明对任意$\delta>0$，都存在正实数$\varepsilon>0$，以使得$|y-y_0|<\varepsilon$时就有$|x-x_0|<\delta$，这是很容易的，对于确定的$\delta$，则两个函数值$U=y_0-\delta$和$V=y_0+\delta$，如果$U$或$V$超出了闭区间$[f(a),f(b)]$的范围，就适当向$f(x_0)$的方向作一定程度的调整，以使得闭区间$[U,V] \subseteq [f(a),f(b)]$，且$U<y_0<V$，如此一来，由介值性，存在$x_1,x_2 \in [a,b]$，使得$U=f(x_1)$和$V=f(x_2)$，又由单调性，显然$x_1 < x_0 < x_2$，显然当$x \in (x_1,x_2)$时，因此可以取$\varepsilon = \min\{x_0-x_1,x_2-x_0\}$就符合条件.
\end{proof}

从证明过程可以看出，定理中的闭区间是可以适当放宽的，为了证明反函数在某点处连续，只要原来的函数在包含对应点的某个闭区间内连续就可以了，下面这个例子便应用了这一点。

\begin{example}
  由指数函数$y=a^x(a>0,a \neq 1)$在$\mathbb{R}$上的连续性，便可以得出对数函数$x=\log_a y$在$(0,+\infty)$上也是连续函数。
\end{example}

\begin{example}
  前面已经证明了，正弦函数$y=\sin{x}$和余弦函数$y=\cos{x}$都是$\mathbb{R}$上的连续函数，因此由这里的定理便可知道，反正弦函数$x=\arcsin{y}(y \in [-1,1])$以及反余弦函数$x=\arccos{y}(y \in [-1,1])$便也在定义域上连续。
\end{example}

\subsection{一致连续}
\label{sec:uniform-continuity}

\begin{definition}
  设函数$f(x)$在某个区间上连续，如果对于任意小的正实数$\varepsilon>0$，都存在某个$\delta>0$，使得区间上任意满足$|x_1-x_2|<\delta$的$x_1,x_2$，都有$|f(x_1)-f(x_2)|<\varepsilon$成立，则称函数在此区间上\emph{一致连续}。
\end{definition}

注意一致连续与在某点处连续是有区别的，函数在某点$x_0$处连续，那么对于一个$\varepsilon$，定义中的$\delta$，一般而言是与$x_0$有关的，即$\delta=\delta(x_0)$，例如反比例函数$f(x)=\frac{1}{x}$，如果$x_0$越靠近0，则$\delta$就要越小，而一致连续则表明，存在对区间上所有点都适用的$\delta$，反比例函数显然无法满足这一点，所以反比例函数在定义域的两个区间上虽然连续，但不是一致连续。

\begin{example}[利普希茨连续]
  设$f(x)$是定义在某个区间上的函数，利普希茨条件是指，存在一个常数$L>0$，使得对区间上任意两个实数$x_1,x_2$，都有$|f(x_1)-f(x_2)| \leqslant |x_1-x_2|$. 显然满足利普希茨条件的函数一定连续，并且一致连续。
\end{example}

\begin{theorem}
  如果函数在某个有限区间上一致连续，则在此区间上必定有界。
\end{theorem}

\begin{proof}[证明]
  固定一个正实数$\varepsilon>0$，则按一致连续能够确定出一个正实数$\delta>0$，使得当$|x_1-x_2|<\delta$时有$|f(x_1)-f(x_2)|<\varepsilon$，于是将区间划分成若干个闭区间的并集，其中每个闭区间的长度都小于$\delta$但大于$\frac{\delta}{2}$，则显然在每个闭区间上都有界，而原来区间的长度是有限的，所以这样的闭区间只能是有限个，因而函数在整个区间上也就有界。
\end{proof}

\begin{theorem}
  闭区间上的连续函数在此闭区间上必定一致连续。
\end{theorem}

\begin{proof}[证明]
  因为函数在闭区间上连续，所以对于任意一个确定的正实数$\varepsilon>0$，在每个$x_0$处都存在一个相应的$\delta=\delta(x_0)$，使得函数在区间$(x_0-\delta,x_0+\delta)$上的函数值都落在区间$(f(x_0)-\frac{\varepsilon}{2},f(x_0)+\frac{\varepsilon}{2})$中，所有这些开区间$(x_0-\delta,x_0+\delta)$显然覆盖了闭区间，依有限覆盖定理，存在其中有限个开区间$(x_i-\delta_i,x_i+\delta_i)(i=1,2,\ldots,n)$，它们的并集就覆盖了此闭区间，取这有限个开区间的诸$\delta_i$中的最小者的一半记为$\delta_m$，再取这有限个开区间中的诸重叠部分的最小长度为$\delta_w$，记$\delta'=\min\{\delta_m,\delta_w\}$，则在闭区间上任意取两个实数$r_1,r_2$并满足$|r_1-r_2|<\delta'$，则两数必然能够位于前述有限个开区间中的同一个$(x_k-\delta_k,x_k+\delta_k)$上，则显然有$|r_1-r_2|<\delta'\leqslant \frac{\delta_k}{2}$，从而
  \[ |f(r_1)-f(r_2)| \leqslant |f(r_1)-f(x_k)|+|f(r_2)-f(x_k)|< \frac{\varepsilon}{2}+\frac{\varepsilon}{2} = \varepsilon \]
  这便表明函数在闭区间上是一致连续的。
\end{proof}

\subsection{无理指数幂}
\label{sec:irrational-power}

在中学数学里，我们已经有了指数的概念，但那时的指数，受限于有理数的情形，虽然给出了定义在全体实数上的指数函数，却没有说明当指数是无理数时，这个幂是何种意义，本小节就来解决这个问题，我们将通过极限来定义无理指数幂。

先回顾一下有理指数幂的定义，设实数$a>0$且$a \neq 1$，它的正整数$n$次幂定义为
\[ a^n = aa\cdots a(n\text{个}a) \]
在这定义下，显然有$a^n>0$(正值性)，而且对于两个正整数$n$和$m$有
\begin{equation}
  \label{eq:exponent-multiple-rule-with-positive-integer}
  a^{n+m}=a^na^m
\end{equation}
这称为指数运算的乘法公式。

如果正整数$n<m$，则在$a>1$时成立
\[ a^n<a^m \]
在$0<a<1$时不等式反向，这就是说，定义在正整数集上的指数函数是单调函数，$a>$时是单调增加的，$0<a<1$时是单调减少的。

现在来把指数推广到任意整数，我们希望上述乘法公式在推广后对任意整数都成立，所以在其中令$m=0$得$a^n=a^n \cdot a^0$，这要对任意正整数$n$都成立则必须$a^0=1$，于是我们就把这作为零次幂的定义，于是指数的正值性仍然成立，而定义在非负整数集上的指数函数仍然保持着它在正整数集上的单调性，接着在上述乘法公式中取$m=-n$，则得到
\[ a^{-n} = \frac{1}{a^n} \]
于是我们把它作为负整数指数幂的定义，这样，我们就把指数概念推广到了任意整数的情形，而且上述乘法公式对于任意两个整数都成立，而且还可以得到下面的公式
\[ a^{n-m} = \frac{a^n}{a^m} \]
容易证明，在把指数函数的定义域从正整数集扩充到全体整数后，正值性和单调性仍然成立，这里就单调性作一证明。
\begin{theorem}
  设两个整数$n<m$，实数$a>1$且$a \neq 1$，则在$a>1$时有$a^n<a^m$，在$0<a<1$时有$a^n>a^m$.
\end{theorem}

\begin{proof}[证明]
  在$a>1$的情况下，如果$n$是负整数而$m$是非负整数，则利用定义在正整数集上的指数函数的单调性得
  \[ a^n = \frac{1}{a^{-n}} < \frac{1}{a^0} = 1 = a^0 \leqslant a^m \]
  而在$n$和$m$都是负整数的情形，$-n$和$-m$是两个正整数并且$-n>-m$，所以利用定义在正整数集上的指数函数的单调性，有
  \[ a^n = \frac{1}{a^{-n}} < \frac{1}{a^{-m}} = a^m \]
  这就证得$a>1$时，定义在整数集上的指数是增函数，而在$0<a<1$时，由
  \[ a^n = \frac{1}{a^{-n}} \]
  知它是减函数。
\end{proof}

由这定理即有如下推论
\begin{inference}
  \label{inference:exponent-compare-to-1}
对于$a>1$和正整数$n$，有$a^n>1$，而对于负整数$n$，则$0<a^n<1$，而对于$0<a<1$，正整数$n$则是$0<a^n<1$，对负整数$n$则是$a^n>1$.
\end{inference}


我们再继续把指数向有理数范围内推广，我们先证下面的结论
\begin{theorem}
 设$n$和$m$是任意两个整数，实数$a>0$且$a \neq 1$，则$(a^m)^n = a^{mn} = (a^n)^m$. 
\end{theorem}

\begin{proof}[证明]
  先证$n$和$m$都是正整数的情形，$(a^m)^n$代表$n$个$a^m$相乘，而$a^m$代表$m$个$a$相乘，所以最终便是$mn$个$a$相乘，所以$(a^m)^n=a^{mn}$，同理$(a^n)^m=a^{nm}=a^{mn}$

  如果$m$和$m$中至少有一个是零，则结论显然是成立的，然后按负正整数指数幂的定义也容易得出结论对于$n$和$m$中至少有一个是负整数时也是成立的。
\end{proof}

有了这个定理，我们来考虑有理整数幂，设$x=n/m$为有理数，其中$n$和$m$是一对互素的整数并且$m$是正整数，我们推广的依据是使得刚才定理中的结论对有理数也成立，这就是说，有下式成立
\[ (a^{\frac{n}{m}})^m = a^{\frac{n}{m}m} = a^n \]
于是得到
\[ a^{\frac{n}{m}} = \sqrt[m]{a^n} \]
我们就把它作为有理指数幂和定义，乘法公式和负指数幂的公式仍然是成立的，并且指数函数在有理数集上的正值性和单调性仍然是成立的，这里我们证明一下单调性。

根据有理指数幂的定义，不难证明\autoref{inference:exponent-compare-to-1}在有理数上也是成立的，假定$x$和$y$是两个有理数并且$x<y$，则由正值性知$a^x>0$,$a^y>0$，在$a>1$时
\[ \frac{a^x}{a^y} = a^{x-y} \]
如果$a>1$，那么由$x-y$是一个负有理数，利用\autoref{inference:exponent-compare-to-1} 在有理数的情形即知$a^{x-y}<1$，所以$a^x<a^y$，同理可证$0<a<1$的情形，这就证明了定义在有理数集上的指数函数的单调性。

现在，我们再作一次推广，把指数推广到全体实数，这只要定义无理指数幂就可以了，但是这时指数的乘法公式似乎已经对我们没什么帮助了，我们转而寻求用有理数逼近无理数时有理指数幂的极限来定义无理指数幂，这就是以下的定义
\begin{definition}
  设实数$a>0$且$a \neq 1$，各项均为有理数的数列$r_n$收敛到一个无理数$r$，则实数$a$的$r$次幂定义为
  \[ a^r = \lim_{n \to \infty} a^{r_n} \]
\end{definition}

这里有几个疑问：这个极限存在吗？对于收敛到无理数$r$的所有有理数列，这个极限都相等吗? 下面这个定理就肯定了这一点。
\begin{theorem}
  设实数$a>0$且$a \neq 1$，$r$是一个无理数，则对于任意收敛到$r$的有理数数列$\{r_n\}$，数列$\{a^{r_n}\}$都收敛，而且极限值都相同(即极限值只与$r$有关)。
\end{theorem}

先证明下面的引理
\begin{lemma}
  \label{lemma:a-power-rn-to-1-when-rational-rn-to-0}
  设有理数数列$r_n$收敛到零，实数$a>0$且$a \neq 1$，则有极限$\lim_{n \to \infty} a^{r_n} = 1$.
\end{lemma}

\begin{proof}[证明]
  我们在\autoref{example:limit-of-n-sqrt-a}中已经证得$\lim_{n \to \infty} \sqrt[n]{a} = 1$，因此对于任意小的正实数$\varepsilon$，都存在正整数$N$，使得$n>N$时恒有$|\sqrt[n]{a}-1|<\varepsilon$，在$a>1$时，就是$1<\sqrt[n]{a}<1+\epsilon$，现在就任意取定一个$n_0>N$，从而有$1<\sqrt[n_0]{a}<1+\varepsilon$ 而由引理条件，$r_n$以零为极限，所以对于正实数$1/n_0$，存在正整数$N_1$，使得当$n>N_1$时有$|r_n|<1/n_0$，这时按照定义在有理数集上的指数函数的单调性(下式中做了限定$\varepsilon<1$)
  \[ 1-\varepsilon<\frac{1}{1+\varepsilon}<\frac{1}{\sqrt[n_0]{a}}<a^{r_n}<\sqrt[n_0]{a}<1+\varepsilon \]
  由此即知$|a^{r_n}-1|<\varepsilon$，所以只要$n>\max\{N, N_1\}$时便能保证$|a^{r_n}-1|<\varepsilon$，这即表明引理中的极限成立，而类似的可以证明$0<a<1$的情况。
\end{proof}

现在回过头来证明前面的定理
\begin{proof}[证明]
  我们先通过两个特殊的有理数数列来确定出这个极限值来，再证明所有收敛到无理数$r$的有理数数列都必以它为极限。

  取无理数$r$的$n$位不足近似值$x_n$和$n$位过剩近似值$y_n$，即$x_n$是把无理数$r$的第$n$位小数以后的小数全部舍去而得的有理数，$y_n$是把它第$n$位小数以后的小数收上来而得到的有理数，显然$x_n<r<y_n$并且$y_n-x_n=10^{-n}$,同时，$x_n$单调不减，而$y_n$单调不增，考虑由它们构成的两个有理指数幂的数列$a^{x_n}$和$a^{y_n}$，由定义在有理数集上的指数函数的单调性，在$a>1$的假定下有
  \[ a^{x_n} \leqslant a^{x_{n+1}} \leqslant \cdots \leqslant a^{y_{n+1}} \leqslant a^{y_n} \]
  于是作闭区间序列$U_n = [a^{x_n},a^{y_n}]$，则显见$U_{n+1} \subset U_n$，而区间的长度$a^{y_n}-a^{x_n}=a^{x_n}(a^{y_n-x_n}-1)$，因为$y_n-x_n=10^{-n} \to 1$，由刚才所证的\autoref{lemma:a-power-rn-to-1-when-rational-rn-to-0}，$a^{y_n-x_n}-1$是一个无穷小，而前面的因子$a^{x_n}<a^{y_n} \leqslant a^{y_1}$是有界量，所以这闭区间的长度序列趋于零，于是由闭区间套定理，存在唯一实数$K$，使得$a^{x_n}<K<a^{y_n}$对一切正整数$n$成立，显然$\lim_{n \to \infty}a^{x_n} = \lim_{n \to \infty}a^{y_n}=K$。

  接下来我们需要证明，对于其它任何收敛到无理数$r$的有理数数列$z_n$，也必将有$\lim_{n \to \infty}a^{z_n}=K$，这是因为
  \[ \lim_{n \to \infty} \frac{a^{z_n}}{a^{x_n}} = \lim_{n \to \infty} a^{z_n-x_n} = 1 \]
  因此
  \[ \lim_{n \to \infty} a^{z_n} = \lim_{n \to \infty} a^{x_n} \frac{a^{z_n}}{a^{x_n}} = \lim_{n \to \infty} a^{x_n} \cdot \lim_{n \to \infty} \frac{a^{z_n}}{a^{x_n}} = K \cdot 1 = K \]
  这就在$a>1$的情况下证明了定理，而$0<a<1$时的情况完全类似。
\end{proof}

这样无理指数幂定义的存在性和唯一性问题就解决了，我们把指数幂和概念推广到了指数是任意实数的场合，这时有一个问题就冒出来了，那就是我们是用的极限而不是指数乘法公式来推导无理指数幂的，那么推广后的实数指数幂是否仍满足前面的指数乘法公式呢?进一步，在有理数上成立的那些运算性质，是否都仍然成立呢? 这由以下定理回答
\begin{theorem}
  \label{theorem:real-exponent-compute-rule}
  设实数$a>0$且$a \neq 1$，$x$和$y$是任意两个实数，则
  (1).
  \[ a^{x+y} = a^xa^y \]
  (2).
  \[ a^{-x} = \frac{1}{a^x} \]
\end{theorem}

为了证明它，先证一个引理
\begin{lemma}
  \label{lemma:a-power-rn-to-a-pow-r-when-rational-rn-to-rational-r}
  设实数$a>0$且$a \neq 1$，$r_n$是一个有理数数列，并且收敛到一个有理数$r$，则$\lim_{n \to \infty} a^{r_n} = a^{r}$.
\end{lemma}

\begin{proof}[证明]
  由有理数数列$r_n$收敛到有理数$r$即知有理数数列$r_n-r$收敛到零，由\autoref{lemma:a-power-rn-to-1-when-rational-rn-to-0}即知$\lim_{n \to \infty}a^{r_n-r} = 1$，从而
  \[ \lim_{n \to \infty} a^{r_n} = \lim_{n \to \infty} a^{r+(r_n-r)} = \lim_{n \to \infty} a^ra^{r_n-r} = a^r \lim_{n \to \infty}a^{r_n-r} = a^r \]
\end{proof}

现在来证明\autoref{theorem:real-exponent-compute-rule}
\begin{proof}[证明]
  (1).只需证明$x$和$y$中至少有一个无理数的情形，假定$x$是无理数，设$x_n$是一个以$x$为极限的有理数数列，则有
  \[ a^{x_n+y} = a^{x_n} \cdot a^y \]
  显然$x_n+y$是一个以$x+y$为极限的有理数数列，而$x+y$为无理数，所以上式左边的极限是$a^{x+y}$，显然右端的极限是$a^xa^y$，由极限的唯一性即得
  \[ \lim_{n \to \infty}a^{x_n+y} = \lim_{n \to \infty}a^{x_n} \cdot a^y \]
  这就表明
  \[ a^{x+y} = a^xa^y \]
  当$x$和$y$都是无理数时，设$x_n$和$y_n$是两个分别收敛到$x$和$y$的有理数数列，有
  \[ a^{x_n+y_n} = a^{x_n}a^{y_n} \]
  显然右端以$a^xa^y$为极限，对于左边，如果$x+y$是无理数，则$x_n+y_n$是收敛到无理数$x+y$的有理数数列，所以它的极限是$a^{x+y}$，如果$x+y$是有理数，则$x_n+y_n$是收敛到有理数$x+y$的有理数数列，由\autoref{lemma:a-power-rn-to-a-pow-r-when-rational-rn-to-rational-r}知左边极限也是$a^{x+y}$，所以无论$x+y$是有理数还是无理数，左边都以$a^{x+y}$为极限，由极限的唯一性，得$a^{x+y}=a^xa^y$.

  (2). 同样只需要证明$x$为无理数的情形，设有理数数列$x_n$以$x$为极限，则显然有
  \[ a^{-x_n} = \frac{1}{a^{x_n}} \]
  显然$-x_n$是以无理数$-x$为极限的有理数数列，所以上式左边以$a^{-x}$为极限，右边显然以$1/a^x$为极限，由极限的唯一性，结论成立。
\end{proof}

有了定理中的这两条，显然对于实数$x$和$y$，也有
\[ a^{x-y} = \frac{a^x}{a^y} \]
所以有理指数幂的运算性质，在实数范围内仍然是成立的。

既然指数扩展到了全体实数，那么我们也可以将指数函数的定义域扩充到全体实数上了，我们先来证明指数函数在R都是单调的

\begin{theorem}
  设实数$a>1$且$a>0$，指数函数$f(x)=a^x$在$a>1$时是$R$上的严格递增函数，在$0<a<1$时是严格递减函数。
\end{theorem}

\begin{proof}[证明]
  先证$a>1$的情况，这时任取两个实数$x<y$，只需证明$a^x<a^y$，此处只需要证明$x$和$y$中至少有一个无理数的情形，先假定$x$是无理数而$y$是有理数，则可以在$x$和$y$之间取一个有理数$z$，即$x<z<y$(这总是可以办到的)，然后设$x_n$是一个收敛到$x$的有理数数列，则由定义在有理数集上的指数函数的单调性和数列极限的保号性，在$x_n$中必定从某项起恒成立下面不等式
  \[ a^{x_n}<a^z<a^y \]
  对上式取极限即得
  \[ a^x \leqslant a^z < a^y \]
  这就证明了$a^x<a^y$，这里引入$z$就是为了去掉$a^x \leqslant a^y$中的等号。

  同理可证$x$为有理数而$y$为无理数的情形，现在来看$x$和$y$都是无理数的情形，这时通过有理数列逼近的方法只能得出$a^x \leqslant a^y$，为了去掉等号，我们在$x$和$y$之间插入两个有理数$r$和$s$，即$x<r<s<y$，这时令$x_n$和$y_n$是两个分别收敛到$x$和$y$的有理数数列，就有
  \[ a^{x_n} < a^r < a^s < a^{y_n} \]
  取极限即得
  \[ a^x \leqslant a^r < a^s \leqslant a^y \]
所以$a^x < a^y$，这就表明$a>1$时，指数函数$0<a<1$是$R$上的递增函数，而对于$0<a<1$的情况，容易知道$a^{-x}=1/a^x$对无理数$x$也是成立的，所以由这关系即可知道$0<a<1$时指数函数是单调递减的。
\end{proof}

接着考虑指数函数在$R$上的连续性，结论是，指数函数是实数集$R$上的连续函数。为着证明这一点，我们需要先证一个极限
\begin{lemma}
  \label{lemma:a-power-x-to-1-when-real-x-to-0}
  设实数$a>0$且$a \neq 1$，则有极限$\lim_{x \to 0} a^x = 1$
\end{lemma}

\begin{proof}[证明]
  只证明$a>1$的情形，$0<a<1$是类似的。

  由引理\autoref{lemma:a-power-rn-to-1-when-rational-rn-to-0}，当$x$取有理数并趋于零时，有$a^x$趋于1，所以对于无论多么小的正实数$\varepsilon$，总存在另一正实数$\delta$，使得满足$|x|<\delta$的一切有理数$x$都成立$1-\varepsilon<a^x<1+\varepsilon$，而对于满足$|x|<\delta$的任一无理数$x$，必然可以在区间$(-\delta,\delta)$上找到一个有理数$x'$和，使得$0<|x|<|x'|<\delta$，这时在$a>1$的情况下，利用前面已经证过的指数函数在实数集上的单调性，就有
  \[ 1-\varepsilon < a^{-x'}<a^x<a^{x'} < 1+\varepsilon \]
  这就表明区间$(-\delta,\delta)$上的全体实数$x$无论有理数无理数都满足$|a^x-1|<\varepsilon$，所以此极限得证。
\end{proof}

\begin{theorem}
  定义在$R$上的指数函数$f(x)=a^x$($a>0$且$a \neq 1$)，是$R$上的连续函数。
\end{theorem}

\begin{proof}[证明]
  只要证明它在$R$上任何一点$x_0$处都连续即可，因为
  \[ a^{x_0+h} - a^{x_0} = a^{x_0}(a^h-1) \]
  由\autoref{lemma:a-power-x-to-1-when-real-x-to-0}即知$\lim_{h \to 0} a^{x_0+h} = a^{x_0}$，这就表明指数函数在$x_0$处是连续的，由$x_0$的任意性即得知它在整个$R$上都是连续的。
\end{proof}

现在，我们有了完整的指数定义，就可以考虑它的逆运算了，也就是对数，设实数$a>0$且$a \neq 1$，$y$是一个正实数，如果实数$x$满足方程$a^x=y$，则称$x$是$y$的以$a$为底的 \emph{对数}，显然，指数和对数互为逆运算。

对数的定义有一个问题，满足方程$a^x=y$的实数$x$是否一定存在呢，实数$y$必须是正实数吗？为解决这个问题，我们还需要证明指数函数的另一个性质
\begin{theorem}
  设实数$a>0$且$a \neq 1$，则指数函数$f(x)=a^x$的函数值可以取遍一切正实数，换句话说，它的值域是$(0,+\infty)$.
\end{theorem}

这利用连续函数在闭区间上的介值性便可以证明，我们在本节的后文给出。

\subsection{初等函数的连续性}
\label{sec:continuousness-of-elementary-function}


在中学里，我们接触过几类 \emph{基本初等函数}: 幂函数、指数函数、对数函数、三角函数. 我们在这一小节里来证明这些函数在它们的定义域的各个区间上都是连续函数，在有了这个结论之后，根据连续的性质，所有的初等函数就都是连续函数了。

1. 幂函数
\begin{theorem}
  幂函数$f(x)=x^p$在定义域的各个区间上连续。
\end{theorem}

\begin{proof}[证明]
  因为如果$p<0$，有$f(x)=1/x^{-p}$，如果分母是连续的，则$f(x)$就是连续的，所以只要证明$p>0$的情况就可以了。

  先证明$p$是正整数的情况，这时由
  \[ (x_0+h)^p-x_0^p = \sum_{i=1}^n C_n^i x_0^{p-i} h^i \]
  显然当$h \to 0$时，右边的各项(有限项)都趋于0，因此$(x_0+h)^p \to x_0^p$，所以函数在$x_0$处连续，由$x_0$的任意性，$p$为正整数的情形得证。
\end{proof}

2. 指数函数与对数函数
\begin{theorem}
  指数函数$f(x)=a^x(a>0,a\neq 1)$是$R$上的连续函数。
\end{theorem}

这在上一小节我们已经证明过了。

3. 三角函数.
\begin{theorem}
  正弦函数$f(x)=\sin{x}$在$R$上连续，余弦函数$g(x)=\cos{x}$在$R$上连续，正切函数$h(x)=\tan{x}$在定义域的每一个区间上都是连续函数。
\end{theorem}

\begin{proof}[证明]
  先证明正弦函数，任取$x_0 \in R$，有
  \[ \sin{(x_0+r)} - \sin{x_0} = 2\cos{ \left( x_0 + \frac{r}{2} \right) }\sin{ \frac{h}{2} } \]
  我们在\autoref{theorem:sinx-over-x-to-1-when-x-to-0}中就已经知道，不等式$|\sin{x}| \leqslant |x|$对一切实数$x$恒成立，所以当$r \to 0$时，上式右端是一个有界量和一个无穷小的乘积，也收敛到零，所以
  \[ \lim_{r \to 0} \sin{(x_0+r)} = \sin{x_0} \]
  从而正弦函数在$x_0$处连续，由$x_0$的任意性，它在$R$上都是连续的。

  对于余弦函数，把它写成
  \[ \cos{x} = \sin{ \left( x+\frac{\pi}{2} \right) } \]
  由正弦函数的连续性和关于复合函数连续性的\autoref{theorem:the-continuity-of-combine-function}即知余弦函数也是连续的。

  正切函数，把它表为正弦函数和余弦函数的商，由商函数的连续性即知它在定义域的各区间上也都是连续的。
\end{proof}


\subsection{利用函数连续性求极限}
\label{sec:find-limit-by-continuousness}

利用函数的连续性，我们可以求得一些有用的极限。

\begin{example}
  \label{example:ln-1+x-equaliant-to-x}
  关于对数函数有极限
  \[ \lim_{x \to 0} \frac{\log_a(1+x)}{x} = \log_a \mathrm{e} \]
  因为
  \[ \frac{\log_a(1+x)}{x} = \log_a (1+x)^{1/x} \]
  由$\lim_{x \to 0} (1+x)^{1/x} = \mathrm{e}$及对数函数的连续性即得结论，特别的有
  \[ \lim_{x \to 0} \frac{\ln(1+x)}{x} = 1 \]
  这就是说，在$x \to 0$时，有$\ln(1+x)=x+o(x)$.
\end{example}

\begin{example}
  \label{example:e-power-x-1-equalitant-to-x}
  对于指数函数，有
  \[ \lim_{x \to 0} \frac{a^x-1}{x} = \ln{a} \]
  只要令$t=a^x-1$，就有
  \[ \frac{a^x-1}{x} = \frac{t}{\log_a(1+t)} \]
  而$x \to 0$时，$t \to 0$，借用上例的结论，便知上式有极限$\ln{a}$，特别情况是
  \[ \lim_{x \to 0} \frac{e^x-1}{x} = 1 \]
  这就是说，在$x \to 0$时，有$e^x=1+x+o(x)$
\end{example}

\begin{example}
  \label{example:1-plus-x-power-subtract-1-equalitant-to-x}
  在前两个例子的基础上，我们证明下面这个重要的极限，设$\mu$是任意实数，则
  \[ \lim_{x \to 0} \frac{(1+x)^{\mu}-1}{x} = \mu \]
\end{example}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../calculus-note"
%%% End:
