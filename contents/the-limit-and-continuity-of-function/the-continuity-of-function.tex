
\section{函数的连续性}
\label{sec:the-continuity-of-function}

\subsection{连续的概念与性质}
\label{sec:the-concept-and-properties-of-continuity-function}

\begin{definition}
  如果函数$f(x)$在$x_0$处的极限正好是该点处的函数值$f(x_0)$则称函数在$x_0$处 \emph{连续}，即
  \[ \lim_{x \to x_0} = f(x_0) \]
\end{definition}

如果是该点处的左极限等于该点处函数值，则称函数在该点处 \emph{左连续}，类似的有 \emph{右连续}的概念。

连续用极限的精确语言描述就是，对于无论多么小的正实数$\varepsilon$，恒存在另一正实数$\delta$，使得对区间$(x_0-\delta, x_0+\delta)$上的一切实数成立着$|f(x)-f(x_0)|<\varepsilon$成立。

如果函数在某点处不连续，则称该点是函数的一个 \emph{间断点}，如果函数在该点处存在极限，只是这极限与函数值不相等或者该点根本就没有定义函数值，那么称这点是 \emph{可去间断点}，可以通过改变或者定义该点的函数值为该点的极限值的方式来将函数进行 \emph{连续开拓}。如果函数在某点处分别存在左极限和右极限，但是两个极限不相等，则称该点是函数的 \emph{跳跃间断点}，跳跃间断点和可去间断点统称 \emph{第一类间断点}，第一类间断点的特征是函数在该点存在两个方向的单侧极限。除第一类间断点之外的其它间断点统称 \emph{第二类间断点}，显然，第二类间断点处至少有一个单侧极限不存在。

\begin{definition}
  如果函数在某个区间上处处连续，则称函数在这区间上连续，或者说它是这区间上的连续函数。
\end{definition}

讨论下函数在某点处连续时所具有的性质:
\begin{theorem}[局部有界性]
  若函数在某点处连续，则必在该点的某邻域上有界。
\end{theorem}

\begin{theorem}[局部保号性]
  若函数在$x_0$处连续，则对于任意小于$f(x_0)$的实数$r$，存在$x_0$的某邻域$(x_0-\delta,x_0+\delta)$，使得函数在该邻域内恒有$f(x)>r$，类似的，对于任意大于$f(x_0)$的实数$r$，也存在$x_0$的某邻域$(x_0-\delta,x_0+\delta)$，使得函数在该区间上恒有$f(x)<r$.
\end{theorem}

\begin{inference}
  如果函数在某点处连续，且该点处函数值为正，则存在该点的某邻域内，函数在这邻域内恒为正号，同理，如果该点函数值为负，则函数必在该点的某邻域内恒保持负号。
\end{inference}

\begin{theorem}
  如果函数$f(x)$和$g(x)$都在$x_0$处连续，则它们的和、差、积、商所作成的函数在该点也连续，在商的情形，要求$g(x_0) \neq 0$。
\end{theorem}

\begin{theorem}[复合函数的连续性]
  \label{theorem:the-continuity-of-combine-function}
  设函数$g(x)$在$x_0$处连续，记$u_0=g(x_0)$，若另一函数$f(u)$在$u_0$处连续，则复合函数$f(g(x))$在$x_0$处连续。
\end{theorem}

以上性质和定理均可直接由极限的相应性质得出。

\subsection{实数的无理指数幂}
\label{sec:the-power-of-real-with-rational-exponent}

在中学数学里，我们已经有了指数的概念，但那时的指数，受限于有理数的情形，虽然给出了定义在全体实数上的指数函数，却没有说明当指数是无理数时，这个幂是何种意义，本小节就来解决这个问题，我们将通过极限来定义无理指数幂。

先回顾一下有理指数幂的定义，设实数$a>0$且$a \neq 1$，它的正整数$n$次幂定义为
\[ a^n = aa\cdots a(n\text{个}a) \]
在这定义下，显然有$a^n>0$(正值性)，而且对于两个正整数$n$和$m$有
\begin{equation}
  \label{eq:exponent-multiple-rule-with-positive-integer}
  a^{n+m}=a^na^m
\end{equation}
这称为指数运算的乘法公式。

如果正整数$n<m$，则在$a>1$时成立
\[ a^n<a^m \]
在$0<a<1$时不等式反向，这就是说，定义在正整数集上的指数函数是单调函数，$a>$时是单调增加的，$0<a<1$时是单调减少的。

现在来把指数推广到任意整数，我们希望上述乘法公式在推广后对任意整数都成立，所以在其中令$m=0$得$a^n=a^n \cdot a^0$，这要对任意正整数$n$都成立则必须$a^0=1$，于是我们就把这作为零次幂的定义，于是指数的正值性仍然成立，而定义在非负整数集上的指数函数仍然保持着它在正整数集上的单调性，接着在上述乘法公式中取$m=-n$，则得到
\[ a^{-n} = \frac{1}{a^n} \]
于是我们把它作为负整数指数幂的定义，这样，我们就把指数概念推广到了任意整数的情形，而且上述乘法公式对于任意两个整数都成立，而且还可以得到下面的公式
\[ a^{n-m} = \frac{a^n}{a^m} \]
容易证明，在把指数函数的定义域从正整数集扩充到全体整数后，正值性和单调性仍然成立，这里就单调性作一证明。
\begin{theorem}
  设两个整数$n<m$，实数$a>1$且$a \neq 1$，则在$a>1$时有$a^n<a^m$，在$0<a<1$时有$a^n>a^m$.
\end{theorem}

\begin{proof}[证明]
  在$a>1$的情况下，如果$n$是负整数而$m$是非负整数，则利用定义在正整数集上的指数函数的单调性得
  \[ a^n = \frac{1}{a^{-n}} < \frac{1}{a^0} = 1 = a^0 \leqslant a^m \]
  而在$n$和$m$都是负整数的情形，$-n$和$-m$是两个正整数并且$-n>-m$，所以利用定义在正整数集上的指数函数的单调性，有
  \[ a^n = \frac{1}{a^{-n}} < \frac{1}{a^{-m}} = a^m \]
  这就证得$a>1$时，定义在整数集上的指数是增函数，而在$0<a<1$时，由
  \[ a^n = \frac{1}{a^{-n}} \]
  知它是减函数。
\end{proof}

由这定理即有如下推论
\begin{inference}
  \label{inference:exponent-compare-to-1}
对于$a>1$和正整数$n$，有$a^n>1$，而对于负整数$n$，则$0<a^n<1$，而对于$0<a<1$，正整数$n$则是$0<a^n<1$，对负整数$n$则是$a^n>1$.
\end{inference}


我们再继续把指数向有理数范围内推广，我们先证下面的结论
\begin{theorem}
 设$n$和$m$是任意两个整数，实数$a>0$且$a \neq 1$，则$(a^m)^n = a^{mn} = (a^n)^m$. 
\end{theorem}

\begin{proof}[证明]
  先证$n$和$m$都是正整数的情形，$(a^m)^n$代表$n$个$a^m$相乘，而$a^m$代表$m$个$a$相乘，所以最终便是$mn$个$a$相乘，所以$(a^m)^n=a^{mn}$，同理$(a^n)^m=a^{nm}=a^{mn}$

  如果$m$和$m$中至少有一个是零，则结论显然是成立的，然后按负正整数指数幂的定义也容易得出结论对于$n$和$m$中至少有一个是负整数时也是成立的。
\end{proof}

有了这个定理，我们来考虑有理整数幂，设$x=n/m$为有理数，其中$n$和$m$是一对互素的整数并且$m$是正整数，我们推广的依据是使得刚才定理中的结论对有理数也成立，这就是说，有下式成立
\[ (a^{\frac{n}{m}})^m = a^{\frac{n}{m}m} = a^n \]
于是得到
\[ a^{\frac{n}{m}} = \sqrt[m]{a^n} \]
我们就把它作为有理指数幂和定义，乘法公式和负指数幂的公式仍然是成立的，并且指数函数在有理数集上的正值性和单调性仍然是成立的，这里我们证明一下单调性。

根据有理指数幂的定义，不难证明\autoref{inference:exponent-compare-to-1}在有理数上也是成立的，假定$x$和$y$是两个有理数并且$x<y$，则由正值性知$a^x>0$,$a^y>0$，在$a>1$时
\[ \frac{a^x}{a^y} = a^{x-y} \]
如果$a>1$，那么由$x-y$是一个负有理数，利用\autoref{inference:exponent-compare-to-1} 在有理数的情形即知$a^{x-y}<1$，所以$a^x<a^y$，同理可证$0<a<1$的情形，这就证明了定义在有理数集上的指数函数的单调性。

现在，我们再作一次推广，把指数推广到全体实数，这只要定义无理指数幂就可以了，但是这时指数的乘法公式似乎已经对我们没什么帮助了，我们转而寻求用有理数逼近无理数时有理指数幂的极限来定义无理指数幂，这就是以下的定义
\begin{definition}
  设实数$a>0$且$a \neq 1$，各项均为有理数的数列$r_n$收敛到一个无理数$r$，则实数$a$的$r$次幂定义为
  \[ a^r = \lim_{n \to \infty} a^{r_n} \]
\end{definition}

这里有几个疑问：这个极限存在吗？对于收敛到无理数$r$的所有有理数列，这个极限都相等吗? 下面这个定理就肯定了这一点。
\begin{theorem}
  设实数$a>0$且$a \neq 1$，$r$是一个无理数，则任意收敛到$r$的有理数数列都收敛，而且极限值都相同。
\end{theorem}

先证明下面的引理
\begin{lemma}
  \label{lemma:a-power-rn-to-1-when-rational-rn-to-0}
  设有理数数列$r_n$收敛到零，实数$a>0$且$a \neq 1$，则有极限$\lim_{n \to \infty} a^{r_n} = 1$.
\end{lemma}

\begin{proof}[证明]
  我们在\autoref{example:limit-of-n-sqrt-a}中已经证得$\lim_{n \to \infty} \sqrt[n]{a} = 1$，因此对于任意小的正实数$\varepsilon$，都存在正整数$N$，使得$n>N$时恒有$|\sqrt[n]{a}-1|<\varepsilon$，在$a>1$时，就是$1<\sqrt[n]{a}<1+\epsilon$，现在就任意取定一个$n_0>N$，从而有$1<\sqrt[n_0]{a}<1+\varepsilon$ 而由引理条件，$r_n$以零为极限，所以对于正实数$1/n_0$，存在正整数$N_1$，使得当$n>N_1$时有$|r_n|<1/n_0$，这时按照定义在有理数集上的指数函数的单调性(下式中做了限定$\varepsilon<1$)
  \[ 1-\varepsilon<\frac{1}{1+\varepsilon}<\frac{1}{\sqrt[n_0]{a}}<a^{r_n}<\sqrt[n_0]{a}<1+\varepsilon \]
  由此即知$|a^{r_n}-1|<\varepsilon$，所以只要$n>\max\{N, N_1\}$时便能保证$|a^{r_n}-1|<\varepsilon$，这即表明引理中的极限成立，而类似的可以证明$0<a<1$的情况。
\end{proof}

现在回过头来证明前面的定理
\begin{proof}[证明]
  我们先通过两个特殊的有理数数列来确定出这个极限值来，再证明所有收敛到无理数$r$的有理数数列都必以它为极限。

  取无理数$r$的$n$位不足近似值$x_n$和$n$位过剩近似值$y_n$，即$x_n$是把无理数$r$的第$n$位小数以后的小数全部舍去而得的有理数，$y_n$是把它第$n$位小数以后的小数收上来而得到的有理数，显然$x_n<r<y_n$并且$y_n-x_n=10^{-n}$,同时，$x_n$单调不减，而$y_n$单调不增，考虑由它们构成的两个有理指数幂的数列$a^{x_n}$和$a^{y_n}$，由定义在有理数集上的指数函数的单调性，在$a>1$的假定下有
  \[ a^{x_n} \leqslant a^{x_{n+1}} \leqslant \cdots \leqslant a^{y_{n+1}} \leqslant a^{y_n} \]
  于是作闭区间序列$U_n = [a^{x_n},a^{y_n}]$，则显见$U_{n+1} \subset U_n$，而区间的长度$a^{y_n}-a^{x_n}=a^{x_n}(a^{y_n-x_n}-1)$，因为$y_n-x_n=10^{-n} \to 1$，由刚才所证的\autoref{lemma:a-power-rn-to-1-when-rational-rn-to-0}，$a^{y_n-x_n}-1$是一个无穷小，而前面的因子$a^{x_n}<a^{y_n} \leqslant a^{y_1}$是有界量，所以这闭区间的长度序列趋于零，于是由闭区间套定理，存在唯一实数$K$，使得$a^{x_n}<K<a^{y_n}$对一切正整数$n$成立，显然$\lim_{n \to \infty}a^{x_n} = \lim_{n \to \infty}a^{y_n}=K$。

  接下来我们需要证明，对于其它任何收敛到无理数$r$的有理数数列$z_n$，也必将有$\lim_{n \to \infty}a^{z_n}=K$，这是因为
  \[ \lim_{n \to \infty} \frac{a^{z_n}}{a^{x_n}} = \lim_{n \to \infty} a^{z_n-x_n} = 1 \]
  因此
  \[ \lim_{n \to \infty} a^{z_n} = \lim_{n \to \infty} a^{x_n} \frac{a^{z_n}}{a^{x_n}} = \lim_{n \to \infty} a^{x_n} \cdot \lim_{n \to \infty} \frac{a^{z_n}}{a^{x_n}} = K \cdot 1 = K \]
  这就在$a>1$的情况下证明了定理，而$0<a<1$时的情况完全类似。
\end{proof}

这样无理指数幂定义的存在性和唯一性问题就解决了，我们把指数幂和概念推广到了指数是任意实数的场合，这时有一个问题就冒出来了，那就是我们是用的极限而不是指数乘法公式来推导无理指数幂的，那么推广后的实数指数幂是否仍满足前面的指数乘法公式呢?进一步，在有理数上成立的那些运算性质，是否都仍然成立呢? 这由以下定理回答
\begin{theorem}
  \label{theorem:real-exponent-compute-rule}
  设实数$a>0$且$a \neq 1$，$x$和$y$是任意两个实数，则
  (1).
  \[ a^{x+y} = a^xa^y \]
  (2).
  \[ a^{-x} = \frac{1}{a^x} \]
\end{theorem}

为了证明它，先证一个引理
\begin{lemma}
  \label{lemma:a-power-rn-to-a-pow-r-when-rational-rn-to-rational-r}
  设实数$a>0$且$a \neq 1$，$r_n$是一个有理数数列，并且收敛到一个有理数$r$，则$\lim_{n \to \infty} a^{r_n} = a^{r}$.
\end{lemma}

\begin{proof}[证明]
  由有理数数列$r_n$收敛到有理数$r$即知有理数数列$r_n-r$收敛到零，由\autoref{lemma:a-power-rn-to-1-when-rational-rn-to-0}即知$\lim_{n \to \infty}a^{r_n-r} = 1$，从而
  \[ \lim_{n \to \infty} a^{r_n} = \lim_{n \to \infty} a^{r+(r_n-r)} = \lim_{n \to \infty} a^ra^{r_n-r} = a^r \lim_{n \to \infty}a^{r_n-r} = a^r \]
\end{proof}

现在来证明\autoref{theorem:real-exponent-compute-rule}
\begin{proof}[证明]
  (1).只需证明$x$和$y$中至少有一个无理数的情形，假定$x$是无理数，设$x_n$是一个以$x$为极限的有理数数列，则有
  \[ a^{x_n+y} = a^{x_n} \cdot a^y \]
  显然$x_n+y$是一个以$x+y$为极限的有理数数列，而$x+y$为无理数，所以上式左边的极限是$a^{x+y}$，显然右端的极限是$a^xa^y$，由极限的唯一性即得
  \[ \lim_{n \to \infty}a^{x_n+y} = \lim_{n \to \infty}a^{x_n} \cdot a^y \]
  这就表明
  \[ a^{x+y} = a^xa^y \]
  当$x$和$y$都是无理数时，设$x_n$和$y_n$是两个分别收敛到$x$和$y$的有理数数列，有
  \[ a^{x_n+y_n} = a^{x_n}a^{y_n} \]
  显然右端以$a^xa^y$为极限，对于左边，如果$x+y$是无理数，则$x_n+y_n$是收敛到无理数$x+y$的有理数数列，所以它的极限是$a^{x+y}$，如果$x+y$是有理数，则$x_n+y_n$是收敛到有理数$x+y$的有理数数列，由\autoref{lemma:a-power-rn-to-a-pow-r-when-rational-rn-to-rational-r}知左边极限也是$a^{x+y}$，所以无论$x+y$是有理数还是无理数，左边都以$a^{x+y}$为极限，由极限的唯一性，得$a^{x+y}=a^xa^y$.

  (2). 同样只需要证明$x$为无理数的情形，设有理数数列$x_n$以$x$为极限，则显然有
  \[ a^{-x_n} = \frac{1}{a^{x_n}} \]
  显然$-x_n$是以无理数$-x$为极限的有理数数列，所以上式左边以$a^{-x}$为极限，右边显然以$1/a^x$为极限，由极限的唯一性，结论成立。
\end{proof}

有了定理中的这两条，显然对于实数$x$和$y$，也有
\[ a^{x-y} = \frac{a^x}{a^y} \]
所以有理指数幂的运算性质，在实数范围内仍然是成立的。

既然指数扩展到了全体实数，那么我们也可以将指数函数的定义域扩充到全体实数上了，我们先来证明指数函数在R都是单调的

\begin{theorem}
  设实数$a>1$且$a>0$，指数函数$f(x)=a^x$在$a>1$时是$R$上的严格递增函数，在$0<a<1$时是严格递减函数。
\end{theorem}

\begin{proof}[证明]
  先证$a>1$的情况，这时任取两个实数$x<y$，只需证明$a^x<a^y$，此处只需要证明$x$和$y$中至少有一个无理数的情形，先假定$x$是无理数而$y$是有理数，则可以在$x$和$y$之间取一个有理数$z$，即$x<z<y$(这总是可以办到的)，然后设$x_n$是一个收敛到$x$的有理数数列，则由定义在有理数集上的指数函数的单调性和数列极限的保号性，在$x_n$中必定从某项起恒成立下面不等式
  \[ a^{x_n}<a^z<a^y \]
  对上式取极限即得
  \[ a^x \leqslant a^z < a^y \]
  这就证明了$a^x<a^y$，这里引入$z$就是为了去掉$a^x \leqslant a^y$中的等号。

  同理可证$x$为有理数而$y$为无理数的情形，现在来看$x$和$y$都是无理数的情形，这时通过有理数列逼近的方法只能得出$a^x \leqslant a^y$，为了去掉等号，我们在$x$和$y$之间插入两个有理数$r$和$s$，即$x<r<s<y$，这时令$x_n$和$y_n$是两个分别收敛到$x$和$y$的有理数数列，就有
  \[ a^{x_n} < a^r < a^s < a^{y_n} \]
  取极限即得
  \[ a^x \leqslant a^r < a^s \leqslant a^y \]
所以$a^x < a^y$，这就表明$a>1$时，指数函数$0<a<1$是$R$上的递增函数，而对于$0<a<1$的情况，容易知道$a^{-x}=1/a^x$对无理数$x$也是成立的，所以由这关系即可知道$0<a<1$时指数函数是单调递减的。
\end{proof}

接着考虑指数函数在$R$上的连续性，结论是，指数函数是实数集$R$上的连续函数。为着证明这一点，我们需要先证一个极限
\begin{lemma}
  \label{lemma:a-power-x-to-1-when-real-x-to-0}
  设实数$a>0$且$a \neq 1$，则有极限$\lim_{x \to 0} a^x = 1$
\end{lemma}

\begin{proof}[证明]
  只证明$a>1$的情形，$0<a<1$是类似的。

  由引理\autoref{lemma:a-power-rn-to-1-when-rational-rn-to-0}，当$x$取有理数并趋于零时，有$a^x$趋于1，所以对于无论多么小的正实数$\varepsilon$，总存在另一正实数$\delta$，使得满足$|x|<\delta$的一切有理数$x$都成立$1-\varepsilon<a^x<1+\varepsilon$，而对于满足$|x|<\delta$的任一无理数$x$，必然可以在区间$(-\delta,\delta)$上找到一个有理数$x'$和，使得$0<|x|<|x'|<\delta$，这时在$a>1$的情况下，利用前面已经证过的指数函数在实数集上的单调性，就有
  \[ 1-\varepsilon < a^{-x'}<a^x<a^{x'} < 1+\varepsilon \]
  这就表明区间$(-\delta,\delta)$上的全体实数$x$无论有理数无理数都满足$|a^x-1|<\varepsilon$，所以此极限得证。
\end{proof}

\begin{theorem}
  定义在$R$上的指数函数$f(x)=a^x$($a>0$且$a \neq 1$)，是$R$上的连续函数。
\end{theorem}

\begin{proof}[证明]
  只要证明它在$R$上任何一点$x_0$处都连续即可，因为
  \[ a^{x_0+h} - a^{x_0} = a^{x_0}(a^h-1) \]
  由\autoref{lemma:a-power-x-to-1-when-real-x-to-0}即知$\lim_{h \to 0} a^{x_0+h} = a^{x_0}$，这就表明指数函数在$x_0$处是连续的，由$x_0$的任意性即得知它在整个$R$上都是连续的。
\end{proof}

现在，我们有了完整的指数定义，就可以考虑它的逆运算了，也就是对数，设实数$a>0$且$a \neq 1$，$y$是一个正实数，如果实数$x$满足方程$a^x=y$，则称$x$是$y$的以$a$为底的 \emph{对数}，显然，指数和对数互为逆运算。

对数的定义有一个问题，满足方程$a^x=y$的实数$x$是否一定存在呢，实数$y$必须是正实数吗？为解决这个问题，我们还需要证明指数函数的另一个性质
\begin{theorem}
  设实数$a>0$且$a \neq 1$，则指数函数$f(x)=a^x$的函数值可以取遍一切正实数，换句话说，它的值域是$(0,+\infty)$.
\end{theorem}

这利用连续函数在闭区间上的介值性便可以证明，我们在本节的后文给出。

\subsection{初等函数的连续性}
\label{sec:the-continuity-of-elementary-function}

在中学里，我们接触过几类 \emph{基本初等函数}: 幂函数、指数函数、对数函数、三角函数. 我们在这一小节里来证明这些函数在它们的定义域的各个区间上都是连续函数，在有了这个结论之后，根据连续的性质，所有的初等函数就都是连续函数了。

1. 幂函数
\begin{theorem}
  幂函数$f(x)=x^p$在定义域的各个区间上连续。
\end{theorem}

\begin{proof}[证明]
  因为如果$p<0$，有$f(x)=1/x^{-p}$，如果分母是连续的，则$f(x)$就是连续的，所以只要证明$p>0$的情况就可以了。

  先证明$p$是正整数的情况，这时由
  \[ (x_0+h)^p-x_0^p = \sum_{i=1}^nx_0^{p-i}h^i \]
  显然当$h \to 0$时，右边的各项(有限项)都趋于0，因此$(x_0+h)^p \to x_0^p$，所以函数在$x_0$处连续，由$x_0$的任意性，$p$为正整数的情形得证。
\end{proof}

2. 指数函数与对数函数
\begin{theorem}
  指数函数$f(x)=a^x(a>0,a\neq 1)$是$R$上的连续函数。
\end{theorem}

这在上一小节我们已经证明过了。

3. 三角函数.
\begin{theorem}
  正弦函数$f(x)=\sin{x}$在$R$上连续，余弦函数$g(x)=\cos{x}$在$R$上连续，正切函数$h(x)=\tan{x}$在定义域的每一个区间上都是连续函数。
\end{theorem}

\begin{proof}[证明]
  先证明正弦函数，任取$x_0 \in R$，有
  \[ \sin{(x_0+r)} - \sin{x_0} = 2\cos{ \left( x_0 + \frac{r}{2} \right) }\sin{ \frac{h}{2} } \]
  我们在\autoref{theorem:sinx-over-x-to-1-when-x-to-0}中就已经知道，不等式$|\sin{x}| \leqslant |x|$对一切实数$x$恒成立，所以当$r \to 0$时，上式右端是一个有界量和一个无穷小的乘积，也收敛到零，所以
  \[ \lim_{r \to 0} \sin{(x_0+r)} = \sin{x_0} \]
  从而正弦函数在$x_0$处连续，由$x_0$的任意性，它在$R$上都是连续的。

  对于余弦函数，把它写成
  \[ \cos{x} = \sin{ \left( x+\frac{\pi}{2} \right) } \]
  由正弦函数的连续性和关于复合函数连续性的\autoref{theorem:the-continuity-of-combine-function}即知余弦函数也是连续的。

  正切函数，把它表为正弦函数和余弦函数的商，由商函数的连续性即知它在定义域的各区间上也都是连续的。
\end{proof}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../calculus-note"
%%% End:
